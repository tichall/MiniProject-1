<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>죠기어때</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bagel+Fat+One&display=swap" rel="stylesheet">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />

    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/detailPage.css">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="module">
      import { watchReview } from "./firebaseUsage.js"
      
      // url에서 리뷰 파라미터 가져오기
      const url = document.location.href;
      console.log(url);
      let query = window.location.search;
      watchReview(query);
      

      // 로고 클릭 이벤트
      document.querySelector('#homepage').addEventListener('click', () => {
        if (sessionStorage.getItem('id') === null) {
          window.location.href = './index.html';
        } else {
          window.location.href = './user_mainpage.html';
        } 
      });

      // 마이페이지 버튼 클릭 이벤트
      document.querySelector('#my-page').addEventListener('click', () => {
        window.location.href = './user_mypage.html';
      });

      // 리뷰 추가하기 버튼 클릭 이벤트
      document.querySelector('#content').addEventListener('click', () => {
        if (sessionStorage.getItem('id') === null) {
          alert("로그인이 필요한 서비스입니다!");
        } else {
          window.location.href = './upload.html';
        } 
        
      });

      // 로그아웃 버튼 클릭 이벤트
      $('#sign-out').click(function() {
            sessionStorage.clear();
            location.href = './nonUser_mainpage.html';
      });

      // 로그인 클릭 이벤트
      $('#sign-in').click(function() {
        location.href = './login.html';
      })

      // 회원가입 클릭 이벤트
      $('#sign-up').click(function() {
        location.href = './signUp.html';
      })


    </script>
    <script>
      
      function loadFile(url) {
        let container = document.getElementById('imageSec');
    
        let newImage = document.createElement("img"); //새 이미지 태그 생성

        //이미지 source 가져오기
        newImage.src = url;
        newImage.style.width = "100%"; 
        newImage.style.height = "100%";
        newImage.style.objectFit = "cover"; // div에 넘치지 않고 들어가게

        //이미지를 image-show div에 추가
        container.appendChild(newImage);
      }
    </script>
</head>
<body>
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
        <a class="navbar-brand" href="#" id="homepage">죠기어때</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <!-- <form class="d-flex" role="search">
            <select class="search-filter">
                <option value="id">아이디</option>
                <option value="accommodation">숙소명</option>
                <option value="location">지역</option>
                <option value="rating">평점</option>
                <option value="review">리뷰내용</option>
            </select>
            <input class="form-control me-2 search-input" type="search" id="search" placeholder="검색어를 입력해주세요!"
                aria-label="Search">
            <button class="btn btn-outline-success searchBtn" type="button" id="search">검색하기</button> -->
            <button class="btn btn-outline-success contentBtn" type="button" id="content">리뷰를 추가해주세요!</button>
        </form>
        <div class="sign">

            <button type="button" id="my-page" class="btn btn-light">마이페이지</button>
            <button type="button" id="sign-out" class="btn">로그아웃</button>
        </div>
    </div>
</nav>

      <div class="review-container">
        <div class="image">
          <!-- 이미지 미리보기 -->
          <div id="imageSec">

          </div>
          
        </div>
        <div class="content">
          <table class="table">
            <tbody>
              <tr>
                <th scope="row" style="width:15%">숙소:</th>
                <td id="reviewHotelName" style="width:85%"></td>
              </tr>
              <tr>
                <th scope="row" style="width:15%">작성자:</th>
                <td id="reviewId" style="width:85%"></td>
              </tr>
              <tr>
                <th scope="row" style="width:15%">작성날짜:</th>
                <td id="reviewDate" style="width:85%"></td>
              </tr>
              <tr>
                <th scope="row" style="width:15%">지역:</th>
                <td id="reviewRegion" style="width:85%"></td>
              </tr>
              <tr>
                <th scope="row" style="width:15%">평점:</th>
                <td id="reviewRate" style="width:85%"></td>
              </tr>
              <tr>
                <th scope="row" style="width:15%">내용:</th>
                <td id="reviewContent" style="width:85%"></td>
              </tr>
            </tbody>
          </table>
          
          
        </div>
      </div>
</body>
</html>

